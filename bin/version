#! /usr/bin/env bash

tag=$1

## If no tag is provided, default to latest
if [ -z "$tag" ]; then
  tag="latest"
fi

if [ "$tag" != "latest" ] && [ "$tag" != "nightly" ] && [ "$tag" != "experimental" ]; then
  echo "Error: tag must be one of: latest, nightly, experimental"
  exit 1
fi

if [ "$tag" = "latest" ]; then
  pnpm changeset version
fi

if [ "$tag" = "nightly" ] || [ "$tag" = "experimental" ]; then
  pnpm changeset version --snapshot $tag
fi
